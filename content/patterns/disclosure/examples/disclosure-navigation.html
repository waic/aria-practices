<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ディスクロージャー（表示/非表示）ナビゲーションメニューの例</title>

    <!-- Core JS and CSS shared by all examples -->
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css">
    <link rel="stylesheet" href="../../../shared/css/core.css">
    <script src="../../../shared/js/examples.js"></script>
    <script src="../../../shared/js/highlight.pack.js"></script>
    <script src="../../../shared/js/app.js"></script>
    <script src="../../../shared/js/skipto.js"></script>

    <!-- JS and CSS for this example -->
    <link href="css/disclosure-navigation.css" rel="stylesheet">
    <script src="js/disclosureMenu.js"></script>
  </head>
  <body>
    <nav aria-label="Related Links" class="feedback">
      <ul>
        <li><a href="https://github.com/w3c/aria-practices/projects/14">関連する Issues</a></li>
        <li><a href="../disclosure-pattern.html">デザインパターン</a></li>
      </ul>
    </nav>
    <main>
      <h1>ディスクロージャー（表示/非表示）ナビゲーションメニューの例</h1>
      <!-- 翻訳元リビジョン: https://github.com/w3c/aria-practices/tree/7f54d9620e32231021aad607b7af7eeee5c24f54 -->

      <section>
        <h2>この例について</h2>
        <div class="advisement">
          <h3>重要</h3>
          <p>
            この例では、ナビゲーションリンクのセットを指すために俗にいう「メニュー」という単語を使用していますが、WAI-ARIA のメニューロールは使用していません。
            サイトナビゲーションのこの実装は、支援技術が menu ロールを持つウィジェットに期待する複雑な機能を提供しないため、menu ロールを使用していません。
            典型的なサイトナビゲーションには、<a href="../../menubar/menu-and-menubar-pattern.html#keyboard_interaction">メニューとメニューバーのパターンで指定されたキーボード操作</a>のすべてが必要ありません。
          </p>
        </div>
        <img alt="" class="example-page-example-icon" src="../../../images/pattern-disclosure.svg">
        <p>
          次の例は、架空の大学のウェブサイトのナビゲーションバーにおいて、<a href="../disclosure-pattern.html">ディスクロージャーパターン</a>を使用してリンクのドロップダウンリストを表示及び非表示にする方法を示しています。
          各ディスクロージャーボタンはウェブサイトのセクションを表しており、展開するとそのセクション内のページへのリンクリストが表示されます。
        </p>
        <p>類似の例には以下が含まれます：</p>
        <ul>
          <li><a href="disclosure-faq.html">よくある質問への回答のディスクロージャー（表示/非表示）の例</a></li>
          <li><a href="disclosure-image-description.html">画像説明のディスクロージャー（表示/非表示）の例</a></li>
          <li><a href="disclosure-navigation-hybrid.html">トップレベルリンク付きディスクロージャー（表示/非表示）ナビゲーションメニューの例</a></li>
          <li><a href="../../menubar/examples/menubar-navigation.html">ナビゲーションメニューバーの例</a></li>
        </ul>
        <h2>使用例のオプション</h2>
        <p>
          この例は、キーボードサポートを実装する 2 つの異なる方法を示しています。以下のチェックボックスで切り替えます。
        </p>
        <label for="arrow-behavior-switch">
          <input type="checkbox" id="arrow-behavior-switch" checked>
          オプションの矢印キー及び　<kbd>Home</kbd>、並びに　<kbd>End</kbd>　のサポートを含める
        </label>
      </section>

      <section>
        <div class="example-header">
          <h2 id="ex_label">例</h2>
        </div>
        <div role="separator" id="ex_start_sep" aria-labelledby="ex_start_sep ex_label" aria-label="Start of"></div>
        <div id="ex1">
          <nav aria-label="架空大学">
            <ul id="exTest" class="disclosure-nav">
              <li>
                <button type="button" aria-expanded="true" aria-controls="id_about_menu">概要</button>
                <ul id="id_about_menu">
                  <li>
                    <a href="#mythical-page-content">概観</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">管理部門</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">事実</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">キャンパスツアー</a>
                  </li>
                </ul>
              </li>
              <li>
                <button type="button" aria-expanded="true" aria-controls="id_admissions_menu">入学案内</button>
                <ul id="id_admissions_menu">
                  <li>
                    <a href="#mythical-page-content">申し込み</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">授業料</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">サインアップ</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">訪問</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">フォトツアー</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">連絡先</a>
                  </li>
                </ul>
              </li>
              <li>
                <button type="button" aria-expanded="true" aria-controls="id_academics_menu">学術</button>
                <ul id="id_academics_menu">
                  <li>
                    <a href="#mythical-page-content">学部・学校</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">学習プログラム</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">優等学位プログラム</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">オンラインコース</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">コースエクスプローラー</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">クラス登録</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">学術カレンダー</a>
                  </li>
                  <li>
                    <a href="#mythical-page-content">成績証明書</a>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
          <div id="mythical-page-content" class="disclosure-page-content" tabindex="-1" role="region" aria-label="架空大学のサンプルページコンテンツ">
            <h3 id="mythical-page-heading">架空大学</h3>
            <p>
              サンプルコンテンツセクション。
              上記のリンクを選択すると、この領域が更新されてナビゲートされます。
            </p>
          </div>
        </div>
        <div role="separator" id="ex_end_sep" aria-labelledby="ex_end_sep ex_label" aria-label="End of"></div>
      </section>

      <section>
        <h2>アクセシビリティ機能</h2>
        <ol>
          <li>この一連のディスクロージャーボタンは架空大学ウェブサイトのナビゲーションリンクの表示を制御するため、それらを含むリストは<q>架空大学</q>という名前のナビゲーションランドマークでラップされています。</li>
          <li>
            リスト構造のセマンティクスは、支援技術の利用者にナビゲーションシステムの階層を伝えます。トップレベルの 3 つのボタンのセットは 3 項目からなるリストに含まれ、各ボタンによって制御されるリンクのセットは、制御ボタンを含むアイテム内のネストされたリスト内に含まれています。
          </li>
          <li>
            ドロップダウンが開かれ、フォーカスがナビゲーション領域内にある場合、<kbd>Esc</kbd> を押すとドロップダウンが閉じます。ナビゲーション領域からフォーカスを外すことでも、開いているドロップダウンは閉じます。この <kbd>Esc</kbd> の振る舞いを実装することは、WCAG 2.1 の <a href="https://www.w3.org/WAI/WCAG21/Understanding/content-on-hover-or-focus.html">1.4.13: ホバー又はフォーカスで表示されるコンテンツ</a>基準を満たすために必要です。
          </li>
          <li>表示/非表示の状態の視覚的インジケーターは、オペレーティングシステム及びブラウザーのハイコントラストモードでキャレットが確実にレンダリングされるよう、CSS の <code>:after</code> 疑似要素のボーダースタイルを使用して作成されています。</li>
          <li>
            オプショナルなナビゲーションキー（矢印キー及び　<kbd>Home</kbd>、並びに　<kbd>End</kbd>）:
            <ol>
              <li>オプショナルな矢印キーサポートを実装しており、フォーカスがナビゲーション領域内に含まれる場合、デフォルトのページスクロール動作を防いでいます。</li>
              <li>
                オプショナルなナビゲーションキーサポートは、主にスクリーンリーダーを使用していないキーボードユーザーのためのものです。読み取りモードとインタラクションモードの両方を持つスクリーンリーダーは、これらのナビゲーションキーをインターセプトし、スクリーンリーダーが読み取りモードにあるときはこれらのキーをページに渡しません。この例を操作するとき、そのようなスクリーンリーダーは通常、読み取りモードにあります。なぜならば、この例はスクリーンリーダーのインタラクションモードをトリガーするウィジェットロールを使用していないためです。
              </li>
              <li>
                実装された場合、オプショナルなナビゲーションキーは、ボタンやリンク間のタブ移動を、置き換えるのではなく補います。これは、ボタンとリンクが、ページの <kbd>Tab</kbd> シーケンスの中で 1 つの停止だけを占め、そのすべての子孫のフォーカスを管理することが期待される <code>grid</code> のようなウィジェットロールを持つ要素に含まれていないためです。
              </li>
            </ol>
          </li>
        </ol>
      </section>

      <section>
        <h2 id="kbd_label">キーボードサポート</h2>
        <table aria-labelledby="kbd_label" class="def">
          <thead>
            <tr>
              <th>キー</th>
              <th>機能</th>
            </tr>
          </thead>
          <tbody>
            <tr data-test-id="key-tab">
              <th>
                <kbd>Tab</kbd><br>
                <kbd>Shift + Tab</kbd>
              </th>
              <td>トップレベルのボタン間、及びドロップダウンが開いている場合は、ドロップダウン内のリンクを通じてキーボードフォーカスを移動する。</td>
            </tr>
            <tr data-test-id="key-enter-space">
              <th>
                <kbd>Space</kbd> 又は<br>
                <kbd>Enter</kbd>
              </th>
              <td>
                <ul>
                  <li>フォーカスがディスクロージャーボタン上にある場合、ボタンをアクティブにして、ドロップダウンの表示を切り替える。</li>
                  <li>
                    フォーカスがリンク上にある場合：
                    <ul>
                      <li>任意のリンクに <code>aria-current</code> が設定されている場合は、それを削除する。</li>
                      <li>フォーカスが当たっているリンクに <code>aria-current="page"</code> を設定する。</li>
                      <li>フォーカスが当たっているリンクをアクティブにする。</li>
                    </ul>
                  </li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="key-escape">
              <th>
                <kbd>Escape</kbd>
              </th>
              <td>ドロップダウンが開いている場合は閉じ、そのドロップダウンを制御するボタンにフォーカスを設定する。</td>
            </tr>
            <tr data-test-id="key-arrows">
              <th>
                <kbd>Down Arrow</kbd> 又は<br>
                <kbd>Right Arrow</kbd><br>
                (オプション)
              </th>
              <td>
                <ul>
                  <li>フォーカスがボタン上にあり、そのドロップダウンが折りたたまれていて、それが最後のボタンではない場合、次のボタンにフォーカスを移動する。</li>
                  <li>フォーカスがボタン上にあり、そのドロップダウンが展開されている場合、ドロップダウン内の最初のリンクにフォーカスを移動する。</li>
                  <li>フォーカスがリンク上にあり、それが最後のリンクではない場合、次のリンクにフォーカスを移動する。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="key-arrows">
              <th>
                <kbd>Up Arrow</kbd> 又は<br>
                <kbd>Left Arrow</kbd><br>
                (オプション)
              </th>
              <td>
                <ul>
                  <li>フォーカスがボタン上にあり、それが最初のボタンではない場合、前のボタンにフォーカスを移動する。</li>
                  <li>フォーカスがリンク上にあり、それが最初のリンクではない場合、前のリンクにフォーカスを移動する。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="key-home-end">
              <th><kbd>Home</kbd> (オプション)</th>
              <td>
                <ul>
                  <li>フォーカスがボタン上にあり、それが最初のボタンではない場合、最初のボタンにフォーカスを移動する。</li>
                  <li>フォーカスがリンク上にあり、それが最初のリンクではない場合、最初のリンクにフォーカスを移動する。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="key-home-end">
              <th><kbd>End</kbd> (オプション)</th>
              <td>
                <ul>
                  <li>フォーカスがボタン上にあり、それが最後のボタンではない場合、最後のボタンにフォーカスを移動する。</li>
                  <li>フォーカスがリンク上にあり、それが最後のリンクではない場合、最後のリンクにフォーカスを移動する。</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <h2 id="rps_label">ロール、プロパティ、ステート、及び tabindex 属性</h2>
        <table aria-labelledby="rps_label" class="data attributes">
          <thead>
            <tr>
              <th scope="col">ロール</th>
              <th scope="col">属性</th>
              <th scope="col">要素</th>
              <th scope="col">使用法</th>
            </tr>
          </thead>
          <tbody>
            <tr data-test-id="button-aria-controls">
              <td></td>
              <th scope="row">
                <code>aria-controls="IDREF"</code>
              </th>
              <td>
                <code>button</code>
              </td>
              <td>ディスクロージャーボタンは、<code>IDREF</code>値で識別されるコンテナの表示を制御する。</td>
            </tr>
            <tr data-test-id="button-aria-expanded">
              <td></td>
              <th scope="row">
                <code>aria-expanded="false"</code>
              </th>
              <td>
                <code>button</code>
              </td>
              <td>
                <ul>
                  <li>ディスクロージャーボタンによって制御されるコンテナが<em>非表示</em>であることを示す。</li>
                  <li>
                    CSS 属性セレクター（例: <code>[aria-expanded="false"]</code>）を使用して、<code>aria-expanded</code> 属性の値と視覚的状態を同期する。
                  </li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="button-aria-expanded">
              <td></td>
              <th scope="row">
                <code>aria-expanded="true"</code>
              </th>
              <td>
                <code>button</code>
              </td>
              <td>
                <ul>
                  <li>ディスクロージャーボタンによって制御されるコンテナが<em>表示</em>されていることを示す。</li>
                  <li>
                    CSS 属性セレクター（例: <code>[aria-expanded="true"]</code>）を使用して、<code>aria-expanded</code> 属性の値と視覚的状態を同期する。
                  </li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="link-aria-current">
              <td></td>
              <th scope="row">
                <code>aria-current="page"</code>
              </th>
              <td>
                <code>a</code>
              </td>
              <td>リンクによって参照されるページが現在表示されていることを示す。</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <h2>JavaScript 及び CSS ソースコード</h2>
        <!--  jsおよびcssファイルがこの例の名前で命名された後、以下の2つのリンクのhrefとテキストを適切なjsおよびcssファイルを参照するように変更します。  -->
        <ul id="css_js_files">
          <li>
            CSS:
            <a href="css/disclosure-navigation.css">disclosure-navigation.css</a>
          </li>
          <li>
            Javascript:
            <a href="js/disclosureMenu.js">disclosureMenu.js</a>
          </li>
        </ul>
      </section>

      <section>
        <h2 id="sc1_label">HTML ソースコード</h2>
        <div role="separator" id="sc1_start_sep" aria-labelledby="sc1_start_sep sc1_label" aria-label="Start of"></div>
        <pre><code id="sc1"></code></pre>
        <div role="separator" id="sc1_end_sep" aria-labelledby="sc1_end_sep sc1_label" aria-label="End of"></div>
        <script>
          sourceCode.add('sc1', 'ex1', 'ex_label', 'css_js_files');
          sourceCode.make();
        </script>
      </section>
    </main>
  </body>
</html>
