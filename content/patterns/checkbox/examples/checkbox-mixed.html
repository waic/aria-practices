<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>チェックボックスの例 (三つの状態)</title>

    <!-- Core JS and CSS shared by all examples -->
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css">
    <link rel="stylesheet" href="../../../shared/css/core.css">
    <script src="../../../shared/js/examples.js"></script>
    <script src="../../../shared/js/highlight.pack.js"></script>
    <script src="../../../shared/js/app.js"></script>
    <script src="../../../shared/js/skipto.js"></script>

    <!-- JS and CSS for this example -->
    <link href="css/checkbox-mixed.css" rel="stylesheet">
    <script src="js/checkbox-mixed.js"></script>
  </head>
  <body>
    <nav aria-label="関連リンク" class="feedback">
      <ul>
        <li><a href="https://github.com/w3c/aria-practices/projects/9">関連するIssues</a></li>
        <li><a href="../checkbox-pattern.html">デザインパターン</a></li>
      </ul>
    </nav>
    <main>
      <h1>チェックボックスの例 (三つの状態)</h1>
      <!-- 翻訳元リビジョン: https://github.com/w3c/aria-practices/tree/d6cf9d8db772603a456e7d7ef52e409d39124301 -->

      <section>
        <h2>この例について</h2>
        <p>
          この例は、<a href="../checkbox-pattern.html">チェックボックスのパターン</a>を使用して、三つの状態、または一部チェックされた状態のチェックボックスを作成する方法を示しています。
          この実装では、一部チェックされた状態のチェックボックスは、標準のHTMLチェックボックスのセットの状態を表しています。
          セット内のチェックボックスが一つもチェックされていない場合、一部チェック状態のチェックボックスはチェックされていません。セットのすべてのチェックボックスがチェックされている場合、一部チェック状態のチェックボックスはチェックされています。
          セットにチェックされているチェックボックスとチェックされていないチェックボックスの両方が含まれている場合、一部チェック状態のチェックボックスは部分的にチェックされています。
          三つの状態のチェックボックスを有効にすると、セット内のチェックボックスの状態が変わります。
        </p>
        <p>類似の例として以下があります:</p>
        <ul>
          <li><a href="checkbox.html">チェックボックス (二つの状態)</a>: シンプルな二つの状態のチェックボックス。</li>
        </ul>
      </section>

      <section>
        <div class="example-header">
          <h2 id="ex_label">例</h2>
        </div>
        <div role="separator" id="ex_start_sep" aria-labelledby="ex_label ex_start_sep" aria-label="の開始"></div>
        <div id="ex1">
          <fieldset class="checkbox-mixed">
            <legend>サンドイッチの具材</legend>
            <div role="checkbox" class="group_checkbox" aria-checked="mixed" aria-controls="cond1 cond2 cond3 cond4" tabindex="0">すべての具材</div>
            <ul class="checkboxes">
              <li>
                <label><input type="checkbox" id="cond1">レタス</label>
              </li>
              <li>
                <label><input type="checkbox" id="cond2" checked>トマト</label>
              </li>
              <li>
                <label><input type="checkbox" id="cond3">マスタード</label>
              </li>
              <li>
                <label><input type="checkbox" id="cond4">スプラウト</label>
              </li>
            </ul>
          </fieldset>
        </div>
        <div role="separator" id="ex_end_sep" aria-labelledby="ex_label ex_end_sep " aria-label="の終了"></div>
      </section>

      <section>
        <h2>アクセシビリティの特徴</h2>
        <ul>
          <li>支援技術のユーザーが、チェックボックスがすべて「サンドイッチの具材」という名前の関連するチェックボックスのグループの一部であることを理解するのを助けるために、チェックボックスは<code>legend</code>要素でラベル付けされた<code>fieldset</code>要素で包まれています。</li>
          <li>ラベルまたはチェックボックスのいずれかをクリックするとチェックボックスが有効になることを容易に知覚するために、ポインタがチェックボックスまたはラベルのいずれかの上にホバーすると、背景色が変わり、境界線が表示され、カーソルがポインタに変わります。</li>
          <li>
            透明な境界線は、オペレーティングシステムのハイコントラスト設定が有効になっている場合、一部のシステムで表示されるため、透明性を使用してフォーカスされている要素と他の要素との視覚的な違いを作ることはできません。
            透明性を使用する代わりに、フォーカスされている要素は境界線が太く、余白が少なくなります。
            要素がフォーカスを受け取ると、その境界線は0ピクセルから2ピクセルに変わり、余白は2ピクセル減少します。
            要素がフォーカスを失うと、その境界線は2ピクセルから0に変わり、余白は2ピクセル増加します。
          </li>
          <li>
            ハイコントラスト設定が色を反転させるときに、CSSのインラインSVGチェックボックスグラフィックの境界線が背景と十分なコントラストを持つようにするため、境界線の色はテキストコンテンツの色と同期されます。
            たとえば、チェックボックスの境界線の色は、チェックボックスを描画するために使用される<code>rect</code>および<code>polyline</code>要素の<code>stroke</code>プロパティのCSS<code>currentcolor</code>値を指定することで、ハイコントラストモードのテキストの前景色と一致するように設定されます。
            チェックボックスのグラフィックの背景をハイコントラストの背景色と一致させるために、<code>rect</code>要素の<code>fill-opacity</code>属性はゼロに設定されます。
            特定の色が<code>stroke</code>および<code>fill</code>プロパティを指定するために代わりに使用されていた場合、それらの色はハイコントラストモードで同じままになり、チェックボックスと背景との間に不十分なコントラストが生じるか、色がハイコントラストモードの背景と一致する場合、チェックボックスが見えなくなる可能性があります。
            <br>注: SVG要素は、<code>currentcolor</code>値がハイコントラストモードで更新されるように、CSS<code>forced-color-adjust</code>プロパティを<code>auto</code>に設定する必要があります。
            一部のブラウザはデフォルトの値として<code>auto</code>を使用しません。
          </li>
        </ul>
      </section>

      <section>
        <h2 id="kbd_label">キーボードサポート</h2>
        <table aria-labelledby="kbd_label" class="def">
          <thead>
            <tr>
              <th>キー</th>
              <th>機能</th>
            </tr>
          </thead>
          <tbody>
            <tr data-test-id="key-tab">
              <th><kbd>Tab</kbd></th>
              <td>キーボードのフォーカスをチェックボックス間で移動します。</td>
            </tr>
            <tr data-test-id="key-space">
              <th><kbd>Space</kbd></th>
              <td>
                <ul>
                  <li>三つの状態のチェックボックスをチェック無し、一部チェック、およびチェック済みの状態の間で切り替えます。</li>
                  <li>三つの状態のチェックボックスがチェック無しの場合、制御されるすべてのチェックボックスはチェック無しになります。</li>
                  <li>三つの状態のチェックボックスが一部チェックされている場合、制御されるチェックボックスは、三つの状態のチェックボックスが最後に一部チェックされだったとき、またはページが読み込まれたときに持っていたデフォルトの状態の組み合わせに戻ります。</li>
                  <li>三つの状態のチェックボックスがチェックされている場合、制御されるすべてのチェックボックスはチェックされます。</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <h2 id="rps_label">ロール、プロパティ、ステート、およびtabindex属性</h2>
        <table aria-labelledby="rps_label" class="data attributes">
          <thead>
            <tr>
              <th scope="col">ロール</th>
              <th scope="col">属性</th>
              <th scope="col">要素</th>
              <th scope="col">使用法</th>
            </tr>
          </thead>
          <tbody>
            <tr data-test-id="checkbox-role">
              <th scope="row"><code>checkbox</code></th>
              <td></td>
              <td><code>div</code></td>
              <td>
                <ul>
                  <li><code>div</code>要素を<code>checkbox</code>として識別します。</li>
                  <li>この<code>div</code>の子テキストコンテンツは、チェックボックスのアクセシブルな名前を提供します。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="checkbox-tabindex">
              <td></td>
              <th scope="row"><code>tabindex="0"</code></th>
              <td><code>div</code></td>
              <td>ページのタブ順序にチェックボックスを含めます。</td>
            </tr>
            <tr data-test-id="checkbox-aria-controls">
              <td></td>
              <th scope="row"><code>aria-controls="[IDREFS]"</code></th>
              <td><code>div</code></td>
              <td>一部チェックされたチェックボックスによって制御されるチェックボックスのセットを識別します。</td>
            </tr>
            <tr data-test-id="checkbox-aria-checked-false">
              <td></td>
              <th scope="row"><code>aria-checked="false"</code></th>
              <td><code>div</code></td>
              <td>
                <ul>
                  <li>三つの状態の<code>checkbox</code>が<strong>チェックされていない</strong>ことを示します。</li>
                  <li>この状態では、すべての制御されるチェックボックスはチェックされていません。</li>
                  <li>CSS属性セレクタ（例：<code>[aria-checked="false"]</code>）は、<code>aria-checked</code>属性の値と視覚的な状態を同期させるために使用されます。</li>
                  <li>オペレーティングシステムとブラウザのハイコントラスト設定をサポートするため、CSSの<code>::before</code>疑似要素と<code>content</code>プロパティがチェックボックスの状態の視覚的な指標を生成するために使用されます。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="checkbox-aria-checked-true">
              <td></td>
              <th scope="row"><code>aria-checked="true"</code></th>
              <td><code>div</code></td>
              <td>
                <ul>
                  <li>三つの状態の<code>checkbox</code>がチェックされていることを示します。</li>
                  <li>この状態では、すべての制御されるチェックボックスはチェックされています。</li>
                  <li>CSS属性セレクタ（例：<code>[aria-checked="true"]</code>）は、<code>aria-checked</code>属性の値と視覚的な状態を同期させるために使用されます。</li>
                  <li>オペレーティングシステムとブラウザのハイコントラスト設定をサポートするため、CSSの<code>::before</code>疑似要素と<code>content</code>プロパティがチェックボックスの状態の視覚的な指標を生成するために使用されます。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="checkbox-aria-checked-mixed">
              <td></td>
              <th scope="row"><code>aria-checked="mixed"</code></th>
              <td><code>div</code></td>
              <td>
                <ul>
                  <li>三つの状態の<code>checkbox</code>が一部チェック状態であることを示します。</li>
                  <li>この状態では、一部の制御されるチェックボックスはチェックされておらず、一部はチェックされています。</li>
                  <li>CSS属性セレクタ（例：<code>[aria-checked="mixed"]</code>）は、<code>aria-checked</code>属性の値と視覚的な状態を同期させるために使用されます。</li>
                  <li>オペレーティングシステムとブラウザのハイコントラスト設定をサポートするため、CSSの<code>::before</code>疑似要素と<code>content</code>プロパティがチェックボックスの状態の視覚的な指標を生成するために使用されます。</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <h2>JavaScriptとCSSのソースコード</h2>
        <ul id="css_js_files">
          <li>CSS: <a href="css/checkbox-mixed.css" type="text/css">checkbox-mixed.css</a></li>
          <li>Javascript: <a href="js/checkbox-mixed.js" type="text/javascript">checkbox-mixed.js</a></li>
        </ul>
      </section>

      <section>
        <h2 id="sc1_label">HTMLソースコード</h2>
        <div role="separator" id="sc1_start_sep" aria-labelledby="sc1_label sc1_start_sep" aria-label="の開始"></div>
        <pre><code id="sc1"></code></pre>
        <div role="separator" id="sc1_end_sep" aria-labelledby="sc1_label sc1_end_sep" aria-label="の終了"></div>
        <script>
          sourceCode.add('sc1', 'ex1', 'ex_label', 'css_js_files');
          sourceCode.make();
        </script>
      </section>
    </main>
  </body>
</html>
