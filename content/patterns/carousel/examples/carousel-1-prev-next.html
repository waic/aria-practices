<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スライド制御のボタンを持つ自動回転イメージカルーセルの例</title>

    <!-- Core JS and CSS shared by all examples -->
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css">
    <link rel="stylesheet" href="../../../shared/css/core.css">
    <script src="../../../shared/js/examples.js"></script>
    <script src="../../../shared/js/highlight.pack.js"></script>
    <script src="../../../shared/js/app.js"></script>
    <script src="../../../shared/js/skipto.js"></script>

    <!-- JS and CSS for this example -->
    <link rel="stylesheet" href="css/carousel-prev-next.css">
    <script src="js/carousel-prev-next.js"></script>
  </head>
  <body>
    <nav aria-label="関連リンク" class="feedback">
      <ul>
        <li><a href="https://github.com/w3c/aria-practices/projects/10">関連するIssues</a></li>
        <li><a href="../carousel-pattern.html">デザインパターン</a></li>
      </ul>
    </nav>
    <main>
      <h1>スライド制御のボタンを持つ自動回転イメージカルーセルの例</h1>
      <!-- 翻訳元リビジョン: https://github.com/w3c/aria-practices/tree/d6cf9d8db772603a456e7d7ef52e409d39124301 -->

      <section>
        <h2>この例について</h2>
        <p>
          以下の<a href="../carousel-pattern.html">カルーセルのパターン</a>の実装例は、ページの読み込み時に自動的に回転を開始するカルーセルのアクセシビリティに不可欠なパターンの特徴を示しています。
          例えば、ユーザーがカルーセル内にフォーカスを移動するか、カルーセルのコンテンツの上にマウスをホバーすると回転が停止し、ユーザーは前のスライドと次のスライドのボタンで表示するスライドを手動で制御できます。
          例の後に続くアクセシビリティの特徴のセクションでは、これらの特徴を詳しく説明しています。
        </p>
        <p>類似の例には以下があります：</p>
        <ul>
          <li><a href="carousel-2-tablist.html">タブでスライドを制御する自動回転イメージカルーセル:</a> ページの読み込み時に自動的に回転するカルーセルに必要なアクセシビリティの特徴を示し、ユーザーがタブのセットで表示するスライドを選択できるようにするイメージカルーセル。</li>
        </ul>
      </section>

      <section>
        <h2>例のオプション</h2>

        <fieldset class="carousel-options">
          <legend>カルーセルの表示と動作のオプション</legend>

          <label for="accessible-controls">
            <input type="checkbox" id="accessible-controls" value="moreaccessible" aria-describedby="accessible-controls-desc">
            画像の外にコントロールとキャプションを表示
          </label>
          <p id="accessible-controls-desc">このオプションは、コントロールとキャプションを画像内にレンダリングするよりもアクセシブルです。なぜなら、コントロールは知覚しやすく、キャプションは背後に回転する画像なしで読みやすくなるからです。</p>

          <label for="rotation-paused">
            <input type="checkbox" id="rotation-paused" value="paused" aria-describedby="rotation-paused-desc">
            読み込み時に自動回転を一時停止（<a href="javascript:history.go(0)"><img class="reload" src="images/reload-icon.png" alt="">再読み込みが必要</a>）
          </label>
          <p id="rotation-paused-desc">
            このオプションは、ページの読み込み時にカルーセルが一時停止しているか再生しているかを制御します。
            一時停止オプションは、視覚障害のあるユーザーや自動回転によって混乱や気を散らされる人々のアクセシビリティを向上させますが、ユーザーが開始/停止ボタンを使用して自動回転を開始できるようにします。</p>
          <p>注：ユーザーがシステムの設定で動きを減少させるオプションを選択している場合、読み込み時に自動回転は常に一時停止されます。</p>

          <label for="rotation-disabled">
            <input type="checkbox" id="rotation-disabled" value="norotate" aria-describedby="rotation-disabled-desc">
            自動回転を無効にする
          </label>
          <p id="rotation-disabled-desc">
            このオプションは、自動回転機能を無効にし、ユーザーインターフェースから開始/停止ボタンを削除することで、視覚障害のあるユーザーや自動回転によって混乱や気を散らされる人々のアクセシビリティを向上させます。
            ユーザーは前のボタンと次のボタンを使用して、手動でスライドをナビゲートできます。
          </p>
        </fieldset>
      </section>

      <section>
        <div class="example-header">
          <h2 id="ex_label">例</h2>
        </div>
        <div role="separator" id="ex_start_sep" aria-labelledby="ex_label ex_start_sep" aria-label="の開始"></div>
        <div id="ex1">
          <section id="myCarousel" class="carousel" aria-roledescription="カルーセル" aria-label="ハイライトされたテレビ番組">
            <div class="carousel-inner">
              <div class="controls">
                <button type="button" class="rotation pause" aria-label="自動スライドショーを停止">
                  <svg width="42" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <rect class="background" x="2" y="2" rx="5" ry="5" width="38" height="24" />
                    <rect class="border" x="4" y="4" rx="5" ry="5" width="34" height="20" />

                    <polygon class="pause" points="17 8 17 20" />

                    <polygon class="pause" points="24 8 24 20" />

                    <polygon class="play" points="15 8 15 20 27 14" />
                  </svg>
                </button>

                <button type="button" class="previous" aria-controls="myCarousel-items" aria-label="前のスライド">
                  <svg width="42" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <rect class="background" x="2" y="2" rx="5" ry="5" width="38" height="24" />
                    <rect class="border" x="4" y="4" rx="5" ry="5" width="34" height="20" />
                    <polygon points="9 14 21 8 21 11 33 11 33 17 21 17 21 20" />
                  </svg>
                </button>

                <button type="button" class="next" aria-controls="myCarousel-items" aria-label="次のスライド">
                  <svg width="42" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <rect class="background" x="2" y="2" rx="5" ry="5" width="38" height="24" />
                    <rect class="border" x="4" y="4" rx="5" ry="5" width="34" height="20" />
                    <polygon points="9 11 21 11 21 8 33 14 21 20 21 17 9 17" />
                  </svg>
                </button>
              </div>

              <div id="myCarousel-items" class="carousel-items" aria-live="off">
                <div class="carousel-item active" role="group" aria-roledescription="スライド" aria-label="1 of 6">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/amsterdamslide__800x600.jpg" alt="アムステルダムでのウォーキングツアー">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-1"> ダイナミックヨーロッパ: アムステルダム、プラハ、ベルリン </a>
                    </h3>

                    <div class="hidden-xs hidden-sm">
                      <p><span class="contrast">3月3日火曜日、午後7時、テレビで</span></p>
                    </div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="2 of 6">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/lands-endslide__800x600.jpg" alt="コーンウォールのLand's End">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-2"> イングランド南西部とパリへの旅 </a>
                    </h3>

                    <div>
                      <p><span class="contrast">9月14日から9月24日または27日まで</span></p>
                    </div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="3 of 6">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/trustslide-2__800x600.jpg" alt="母と娘がノートパソコンでダニエルタイガーゲームをプレイ">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-3"> 公共テレビの素晴らしい子供向け番組 </a>
                    </h3>

                    <div></div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="4 of 6">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/foyleswarslide__800x600.jpg" alt="スーツとフェドラ帽をかぶった男と、髪を整えた女がカメラを厳しく見つめている。">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-4"> Foyleの戦争再訪 </a>
                    </h3>

                    <div>
                      <p><span class="contrast">3月8日日曜日、午後8時、テレビで: 最終シーズンの先行上映。</span></p>
                    </div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="5 of 6">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/britcomdavidslide__800x600.jpg" alt="WILL-TVのホスト、デビッド・シールとともに英国の旗">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-5"> グレートブリテン投票: 土曜日午後7時 </a>
                    </h3>

                    <div></div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="6 of 6">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/mag800-2__800x600.jpg" alt="セットでのMid-American Gardenerのパネリスト">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-6"> Mid-American Gardener: 木曜日午後7時 </a>
                    </h3>

                    <div class="hidden-xs hidden-sm">
                      <p><span class="contrast">最新のエピソードを見る。</span></p>
                    </div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->
              </div>
            </div>
            <!-- carousel-inner -->
          </section>
          <!-- /.carousel -->

          <div class="col-sm-1"></div>
        </div>
        <div role="separator" id="ex_end_sep" aria-labelledby="ex_label ex_end_sep" aria-label="の終了"></div>
      </section>

      <section>
        <h2>アクセシビリティ機能</h2>
        <h3>自動スライド回転の制御</h3>
        <p>
          ユーザーはスライドの回転を停止し、再開することができ、これはさまざまな障害を持つ人々にとってカルーセルのアクセシビリティの重要な側面です。
          低視力者や視覚処理や読書に影響を及ぼす認知障害を持つ人々は、スライドの内容を探索するのに十分な時間を持つためにスライドの回転を制御できることから利益を得ます。
          同様に、スクリーンリーダーのユーザーが自動回転を知覚できないため、ページの読み取りが混乱し、方向を失うことがあります。
          例えば、スライドが自動的に回転しているとき、スクリーンリーダーのユーザーはスライド1の要素を読み、次の要素を読むためのスクリーンリーダーのコマンドを実行するかもしれませんが、スライド1の次の要素を聞く代わりに、完全に新しいコンテキストからの要素を知らずにスライド2からの要素を聞くことになります。
        </p>
        <p>この例には、ユーザーがスライドの回転を制御するための以下の機能が含まれています:</p>
        <ul>
          <li>オペレーティングシステムの設定が動きの減少やアニメーションの無効化に設定されている場合、自動回転は初めから一時停止されます。</li>
          <li>
            カルーセルの任意のコンテンツにマウスをホバーすると、自動回転が一時停止します。
            マウスがカルーセルから移動すると、キーボードのフォーカスなど、回転を防ぐ別の条件がトリガーされていない限り、自動回転が再開されます。
          </li>
          <li>
            キーボードのフォーカスをカルーセルの任意のコンテンツ、次や前のスライドの要素を含むものに移動すると、自動回転が一時停止します。
            キーボードのフォーカスがカルーセルのコンテンツから移動すると、マウスのホバーなど、回転を防ぐ別の条件がトリガーされていない限り、自動回転が再開されます。
          </li>
          <li>
            カルーセルには、自動回転を停止し、再開することができる回転制御ボタンも含まれています。
            <ul>
              <li>回転制御ボタンは、スクリーンリーダーの読み取り順序で最初の要素です。</li>
              <li>回転制御ボタンは常に表示されているため、マウス、キーボード、補助技術、またはタッチを介して対話しているすべてのユーザーに利用できます。</li>
              <li>カルーセルが回転している場合、ボタンのアクセシブルな名前は「自動スライドショーを停止」となり、スライドが変更されていることをスクリーンリーダーユーザーに通知するとともに、変更を停止する方法を提供します。</li>
              <li>カルーセルが回転していない場合、ボタンのアクセシブルな名前は「自動スライドショーを開始」となります。</li>
              <li>
                ユーザーが回転制御ボタンを活性化して回転を開始する場合、ユーザーが自動回転をすぐに開始したいと考えていると想定されます。したがって、回転を一時停止するカルーセル内のフォーカスや/およびホバーの状態は無視されます。
                回転は、再び回転制御ボタンが活性化されるまで停止することはありません。
              </li>
            </ul>
          </li>
          <li>
            この例には、自動スライド回転を完全に無効にするオプションが含まれています。
            このオプションが選択されると、開始/停止ボタンはレンダリングされず、スライドは次および前のボタンの活性化を通じてのみ回転することができます。
          </li>
        </ul>
        <h3>テキストと回転制御の色のコントラスト</h3>
        <p>
          このカルーセルのビューでは、コントロールとキャプションが画像内に表示されている場合、背景画像によってコントロールとテキストの色のコントラストが不十分になる可能性があります。
          しかし、このビューには、この潜在的な問題を防ぐための以下の機能が含まれており、WCAG 2.1の色のコントラスト要件を満たしています:
        </p>
        <ul>
          <li>
            回転制御、次のスライド、および前のスライドのボタンが画像内にレンダリングされる場合、ボタンにはWCAG 2.1の色のコントラスト要件を満たす前景色と背景色があります。
            さらに、フォーカスのスタイリングは、コントロールがキーボードのフォーカスを受け取ったときにフォーカスインジケーターが非常に目立つようにするSVG画像を使用しています。
          </li>
          <li>キャプションエリアの透明度が減少しているため、キャプションテキストはWCAG 2.1の色のコントラスト要件を満たしています。</li>
        </ul>

        <p>
          画像内にコントロールとテキストを表示することによって引き起こされる色のコントラストの問題を回避する1つの方法は、コントロールを画像の外に配置することです。
          コントロールとテキストを固定背景に表示することで、色のコントラストを制御するのが簡単になります。
          1つのビューオプションは、この技術の例を提供しています。
        </p>

        <h3>スライドの変更のスクリーンリーダーのアナウンスメント</h3>
        <p>
          自動回転がオフになっている場合、カルーセルのスライドコンテンツはライブリージョンに含まれています。
          これにより、スクリーンリーダーのユーザーがカルーセルのスライドをスキャンするのが簡単になります。
          スクリーンリーダーのユーザーが次または前のスライドボタンを活性化すると、新しいスライドのコンテンツがアナウンスされ、コンテンツと対話するかどうかを判断するための即時のフィードバックが与えられます。
          非常に重要なことに、自動回転がオンになっている場合、ライブリージョンは無効になっています。
          そうでなければ、継続的に変更されるコンテンツのアナウンスメントが他のユーザーが読んでいるものを常に中断するため、ページが使用できなくなります。
        </p>
      </section>

      <section>
        <h2 id="kbd_label">キーボードサポート</h2>
        <section>
          <h3 id="kbd_label_2">回転制御ボタン</h3>
          <table aria-labelledby="kbd_label_2 kbd_label" class="def">
            <thead>
              <tr>
                <th>キー</th>
                <th>機能</th>
              </tr>
            </thead>
            <tbody>
              <tr data-test-id="carousel-key-tab">
                <th><kbd>Tab</kbd></th>
                <td>
                  <ul>
                    <li>カルーセル内のインタラクティブな要素を通してフォーカスを移動します。</li>
                    <li>回転制御、前のスライド、次のスライドのボタンは、<kbd>Tab</kbd>の順序でスライドの内容よりも先に来ます。</li>
                  </ul>
                </td>
              </tr>
              <tr data-test-id="carousel-enter-or-space-toggle">
                <th><kbd>Enter</kbd> または <kbd>Space</kbd></th>
                <td>カルーセル内のスライドの自動回転を切り替えます。</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section>
          <h3 id="kbd_label_3">次および前のスライドボタン</h3>
          <table aria-labelledby="kbd_label_3 kbd_label" class="def">
            <thead>
              <tr>
                <th>キー</th>
                <th>機能</th>
              </tr>
            </thead>
            <tbody>
              <tr data-test-id="carousel-key-enter-or-space-move">
                <th><kbd>Enter</kbd><br><kbd>Space</kbd></th>
                <td>カルーセル内の次または前のスライドを表示します。</td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>

      <section>
        <h2 id="rps_label">役割、プロパティ、状態、およびTabindex属性</h2>
        <table aria-labelledby="rps_label" class="data attributes">
          <thead>
            <tr>
              <th scope="col">役割</th>
              <th scope="col">属性</th>
              <th scope="col">要素</th>
              <th scope="col">使用法</th>
            </tr>
          </thead>
          <tbody>
            <tr data-test-id="carousel-region-role">
              <th scope="row">
                <code>region</code>
              </th>
              <td></td>
              <td>
                <code>section</code>
              </td>
              <td>
                <ul>
                  <li>アクセス可能な名前を持つ任意の<code>section</code>要素には役割<code>region</code>が暗示されます。</li>
                  <li>カルーセルとそのコントロールをランドマーク領域として定義します。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-region-aria-roledescription">
              <td></td>
              <th scope="row">
                <code>aria-roledescription="carousel"</code>
              </th>
              <td>
                <code>section</code>
              </td>
              <td>
                <ul>
                  <li>要素を「region」ではなく「carousel」として識別するように支援技術に通知します。</li>
                  <li>支援技術が役割をレンダリングする方法に影響を与えますが、ランドマーク領域への移動のような機能には影響しません。</li>
                  <li>注: <code>aria-roledescription</code>の値はページの言語を使用して定義され、著者によってローカライズされる必要があります。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-region-aria-label">
              <td></td>
              <th scope="row">
                <code>aria-label="ハイライトされたテレビ番組"</code>
              </th>
              <td>
                <code>section</code>
              </td>
              <td>カルーセル領域の内容を説明するラベルを提供します。</td>
            </tr>
            <tr data-test-id="carousel-aria-live">
              <td></td>
              <th scope="row">
                <code>aria-live="off"</code>
              </th>
              <td>
                <code>div.carousel-items</code>
              </td>
              <td>
                <ul>
                  <li>すべてのスライドを含む<code>div</code>要素に適用されます。</li>
                  <li>コンテナ要素を「off」状態のライブ領域として識別し、支援技術のユーザーは領域の変更について通知されません。</li>
                  <li>カルーセルが自動的に回転している場合、ライブ領域はオフになります。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-aria-live">
              <td></td>
              <th scope="row">
                <code>aria-live="polite"</code>
              </th>
              <td>
                <code>div.carousel-items</code>
              </td>
              <td>
                <ul>
                  <li>すべてのスライドを含む<code>div</code>要素に適用されます。</li>
                  <li>コンテナ要素を「polite」状態のライブ領域として識別し、支援技術のユーザーは次の利用可能な機会に領域の変更について通知されます。</li>
                  <li>これにより、次のスライドボタンと前のスライドボタンがアクティブになったときにスクリーンリーダーが自動的にスライドの内容をアナウンスします。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-group-role">
              <th scope="row">
                <code>group</code>
              </th>
              <td></td>
              <td>
                <code>div.carousel-item</code>
              </td>
              <td>
                <ul>
                  <li>単一のスライドの内容を含む各要素に適用されます。</li>
                  <li>支援技術のユーザーがスライドの境界を知覚できるようにします。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-group-aria-roledescription">
              <td></td>
              <th scope="row">
                <code>aria-roledescription="スライド"</code>
              </th>
              <td>
                <code>div.carousel-item</code>
              </td>
              <td>
                <ul>
                  <li>要素を「group」ではなく「スライド」として識別するように支援技術に通知します。</li>
                  <li>支援技術が役割をレンダリングする方法に影響を与えますが、<code>group</code>要素に関連する支援技術の機能を削除することはありません。</li>
                  <li>注: <code>aria-roledescription</code>の値はページの言語を使用して定義され、著者によってローカライズされる必要があります。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-group-aria-label">
              <td></td>
              <th scope="row">
                <code>aria-label="<em>N</em> of 6"</code>
              </th>
              <td>
                <code>div.carousel-item</code>
              </td>
              <td>
                <ul>
                  <li>6つのスライドのうちどれが表示されているかをユーザーに理解させるための独自のラベルを各スライドに提供します。</li>
                  <li>
                    注: 通常、アクセス可能な名前にセットの位置とサイズの情報を含めることは適切ではありません。
                    例外として、この実装ではgroup要素が<code>aria-setsize</code>または<code>aria-posinset</code>をサポートしていないため、この情報が役立ちます。
                  </li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-button-aria-label">
              <td></td>
              <th scope="row">
                <code>aria-label="LABEL_STRING"</code>
              </th>
              <td>
                <code>button</code>
              </td>
              <td>一時停止自動回転ボタンおよび次および前のスライドボタンのアクセス可能な名前を定義します。</td>
            </tr>
            <tr data-test-id="carousel-button-aria-controls">
              <td></td>
              <th scope="row">
                <code>aria-controls="IDREF"</code>
              </th>
              <td>
                <code>button</code>
              </td>
              <td>
                <ul>
                  <li>ボタンが制御するページ上のコンテンツを識別します。</li>
                  <li>すべてのスライドを含む<code>div</code>を参照します。</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <h2>JavaScriptとCSSのソースコード</h2>
        <ul id="css_js_files">
          <li>CSS: <a href="css/carousel-prev-next.css" type="text/css">carousel-prev-next.css</a></li>
          <li>Javascript: <a href="js/carousel-prev-next.js" type="text/javascript">carousel-prev-next.js</a></li>
        </ul>
      </section>

      <section>
        <h2 id="sc1_label">HTMLソースコード</h2>
        <div role="separator" id="sc1_start_sep" aria-labelledby="sc1_label sc1_start_sep" aria-label="の開始"></div>
        <pre><code id="sc1"></code></pre>
        <div role="separator" id="sc1_end_sep" aria-labelledby="sc1_label sc1_end_sep" aria-label="の終了"></div>
        <script>
          sourceCode.add('sc1', 'ex1', 'ex_label', 'css_js_files');
          sourceCode.make();
        </script>
      </section>
    </main>
  </body>
</html>
