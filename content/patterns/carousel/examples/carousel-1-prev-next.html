<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>スライドコントロールのボタンを持つ自動回転画像カルーセルの例</title>

    <!-- Core JS and CSS shared by all examples -->
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css">
    <link rel="stylesheet" href="../../../shared/css/core.css">
    <script src="../../../shared/js/examples.js"></script>
    <script src="../../../shared/js/highlight.pack.js"></script>
    <script src="../../../shared/js/app.js"></script>
    <script src="../../../shared/js/skipto.js"></script>

    <!-- JS and CSS for this example -->
    <link rel="stylesheet" href="css/carousel-prev-next.css">
    <script src="js/carousel-prev-next.js"></script>
  </head>
  <body>
    <nav aria-label="関連リンク" class="feedback">
      <ul>
        <li><a href="https://github.com/w3c/aria-practices/projects/10">Related Issues</a></li>
        <li><a href="../carousel-pattern.html">デザインパターン</a></li>
      </ul>
    </nav>
    <main>
      <h1>スライドコントロールのボタンを持つ自動回転画像カルーセルの例</h1>
      <!-- 翻訳元リビジョン: https://github.com/w3c/aria-practices/tree/d6cf9d8db772603a456e7d7ef52e409d39124301 -->

      <section>
        <h2>この例について</h2>
        <p>
          以下の<a href="../carousel-pattern.html">カルーセル パターン</a>の実装例は、ページの読み込み時に自動的に回転を開始するカルーセルのアクセシビリティに不可欠なパターンの特徴を示しています。
          例えば、利用者がカルーセル内にフォーカスを移動するか、カルーセルのコンテンツの上にマウスをホバーすると回転が停止し、利用者は前のスライドと次のスライドのボタンで表示するスライドを手動で制御できます。
          例の後に続くアクセシビリティの特徴のセクションでは、これらの特徴を詳しく説明しています。
        </p>
        <p>類似の例には以下があります:</p>
        <ul>
          <li><a href="examples/carousel-2-tablist.html">スライドコントロールのタブを持つ自動回転画像カルーセル:</a> ページの読み込み時に自動的に回転するカルーセルに必要なアクセシビリティ機能を示す画像カルーセルです。また、一連のタブで表示するスライドを利用者が選択できるようにしています。</li>
        </ul>
      </section>

      <section>
        <h2>例のオプション</h2>

        <fieldset class="carousel-options">
          <legend>カルーセルの表示と動作のオプション</legend>

          <label for="accessible-controls">
            <input type="checkbox" id="accessible-controls" value="moreaccessible" aria-describedby="accessible-controls-desc">
            画像の外にコントロールとキャプションを表示
          </label>
          <p id="accessible-controls-desc">このオプションは、コントロールとキャプションを画像内にレンダリングするよりもアクセシブルです。なぜなら、コントロールは知覚しやすく、背後に回転する画像がなくキャプションは読みやすくなるからです。</p>

          <label for="rotation-paused">
            <input type="checkbox" id="rotation-paused" value="paused" aria-describedby="rotation-paused-desc">
            読み込み時に自動回転を一時停止（<a href="javascript:history.go(0)"><img class="reload" src="images/reload-icon.png" alt="">再読み込みが必要</a>）
          </label>
          <p id="rotation-paused-desc">
            このオプションは、ページの読み込み時にカルーセルが一時停止しているか再生しているかを制御します。
            一時停止オプションは、視覚障害のある利用者や自動回転によって混乱や気を散らされる人々のアクセシビリティを向上させますが、利用者が開始/停止ボタンを使用して自動回転を開始できるようにします。</p>
          <p>注記: 利用者がシステムの設定で動きを減少させるオプションを選択している場合、読み込み時に自動回転は常に一時停止されます。</p>

          <label for="rotation-disabled">
            <input type="checkbox" id="rotation-disabled" value="norotate" aria-describedby="rotation-disabled-desc">
            自動回転を無効にする
          </label>
          <p id="rotation-disabled-desc">
            このオプションは、自動回転機能を無効にし、ユーザーインターフェースから開始/停止ボタンを削除することで、視覚障害のある利用者や自動回転によって混乱や気を散らされる人々のアクセシビリティを向上させます。
            利用者は前のボタンと次のボタンを使用して、手動でスライドをナビゲートできます。
          </p>
        </fieldset>
      </section>

      <section>
        <div class="example-header">
          <h2 id="ex_label">例</h2>
        </div>
        <div role="separator" id="ex_start_sep" aria-labelledby="ex_label ex_start_sep" aria-label="の開始"></div>
        <div id="ex1">
          <section id="myCarousel" class="carousel" aria-roledescription="カルーセル" aria-label="ハイライトされたテレビ番組">
            <div class="carousel-inner">
              <div class="controls">
                <button type="button" class="rotation pause" aria-label="自動スライドショーを停止">
                  <svg width="42" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <rect class="background" x="2" y="2" rx="5" ry="5" width="38" height="24" />
                    <rect class="border" x="4" y="4" rx="5" ry="5" width="34" height="20" />

                    <polygon class="pause" points="17 8 17 20" />

                    <polygon class="pause" points="24 8 24 20" />

                    <polygon class="play" points="15 8 15 20 27 14" />
                  </svg>
                </button>

                <button type="button" class="previous" aria-controls="myCarousel-items" aria-label="前のスライド">
                  <svg width="42" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <rect class="background" x="2" y="2" rx="5" ry="5" width="38" height="24" />
                    <rect class="border" x="4" y="4" rx="5" ry="5" width="34" height="20" />
                    <polygon points="9 14 21 8 21 11 33 11 33 17 21 17 21 20" />
                  </svg>
                </button>

                <button type="button" class="next" aria-controls="myCarousel-items" aria-label="次のスライド">
                  <svg width="42" height="34" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <rect class="background" x="2" y="2" rx="5" ry="5" width="38" height="24" />
                    <rect class="border" x="4" y="4" rx="5" ry="5" width="34" height="20" />
                    <polygon points="9 11 21 11 21 8 33 14 21 20 21 17 9 17" />
                  </svg>
                </button>
              </div>

              <div id="myCarousel-items" class="carousel-items" aria-live="off">
                <div class="carousel-item active" role="group" aria-roledescription="スライド" aria-label="6枚中の1">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/amsterdamslide__800x600.jpg" alt="アムステルダムでのウォーキングツアー">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-1"> ダイナミックヨーロッパ: アムステルダム、プラハ、ベルリン </a>
                    </h3>

                    <div class="hidden-xs hidden-sm">
                      <p><span class="contrast">3月3日火曜日、午後7時、テレビで</span></p>
                    </div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="6枚中の2">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/lands-endslide__800x600.jpg" alt="コーンウォールのLand's End">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-2"> イングランド南西部とパリへの旅 </a>
                    </h3>

                    <div>
                      <p><span class="contrast">9月14日から9月24日又は27日まで</span></p>
                    </div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="6枚中の3">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/trustslide-2__800x600.jpg" alt="母と娘がノートパソコンでダニエルタイガーゲームをプレイ">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-3"> 公共テレビの素晴らしい子供向け番組 </a>
                    </h3>

                    <div></div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="6枚中の4">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/foyleswarslide__800x600.jpg" alt="スーツとフェドラ帽をかぶった男と、髪を整えた女がカメラを厳しく見つめている。">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-4"> Foyleの戦争再訪 </a>
                    </h3>

                    <div>
                      <p><span class="contrast">3月8日日曜日、午後8時、テレビで: 最終シーズンの先行上映。</span></p>
                    </div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="6枚中の5">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/britcomdavidslide__800x600.jpg" alt="WILL-TVのホスト、デビッド・シールとともに英国の旗">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-5"> グレートブリテン投票: 土曜日午後7時 </a>
                    </h3>

                    <div></div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->

                <div class="carousel-item" role="group" aria-roledescription="スライド" aria-label="6枚中の6">
                  <div class="carousel-image">
                    <a href="#">
                      <img src="images/mag800-2__800x600.jpg" alt="セットでのMid-American Gardenerのパネリスト">
                    </a>
                  </div>

                  <div class="carousel-caption">
                    <h3>
                      <a href="#" id="carousel-label-6"> Mid-American Gardener: 木曜日午後7時 </a>
                    </h3>

                    <div class="hidden-xs hidden-sm">
                      <p><span class="contrast">最新のエピソードを見る。</span></p>
                    </div>
                  </div>
                  <!-- .carousel-caption -->
                </div>
                <!-- .item -->
              </div>
            </div>
            <!-- carousel-inner -->
          </section>
          <!-- /.carousel -->

          <div class="col-sm-1"></div>
        </div>
        <div role="separator" id="ex_end_sep" aria-labelledby="ex_label ex_end_sep" aria-label="の終了"></div>
      </section>

      <section>
        <h2>アクセシビリティ機能</h2>
        <h3>自動スライド回転の制御</h3>
        <p>
          利用者はスライドの回転を停止及び開始することができます。これは、障害を持つ様々な人々にとって、カルーセルのアクセシビリティの不可欠な側面です。
          ロービジョンや、視覚処理や読解に影響を及ぼす認知障害のある人にとって、スライドの回転を制御できることは、スライドの内容を探索するのに十分な時間を確保できることになり、利益を得られます。
          同様に、スクリーンリーダーの利用者は自動的な回転を知覚できないため、ページを読むことが混乱しやすく、方向感を失わせることがあります。
          例えば、スライドが自動的に回転しているとき、スクリーンリーダーの利用者はスライド 1 の要素を読んで、次の要素を読むためのスクリーンリーダーのコマンドを実行するかもしれませんが、スライド 1 の次の要素を聞く代わりに、完全に新しいコンテキストからの要素であるスライド 2 の要素を聞くことになり得ます。
        </p>
        <p>この例には、利用者がスライドの回転を制御するための以下の機能が含まれています:</p>
        <ul>
          <li>オペレーティングシステムの設定が動きの減少やアニメーションの無効化に設定されている場合、自動回転は初めから一時停止されます。</li>
          <li>
            カルーセルのいずれかのコンテンツにマウスをホバーすると、自動回転が一時停止します。
            マウスがカルーセルから移動すると、キーボードのフォーカスなど、回転を防ぐ別の条件がトリガーされていない限り、自動回転が再開されます。
          </li>
          <li>
            キーボードのフォーカスをカルーセルの任意のコンテンツ (次や前のスライドの要素を含む) に移動すると、自動回転が一時停止します。
            キーボードのフォーカスがカルーセルのコンテンツから移動すると、マウスのホバーなど、回転を防ぐ別の条件がトリガーされていない限り、自動回転が再開されます。
          </li>
          <li>
            カルーセルには、自動回転を停止及び再開することができる回転制御ボタンも含まれています。
            <ul>
              <li>回転制御ボタンは、スクリーンリーダーの読み取り順序で最初の要素です。</li>
              <li>回転制御ボタンは常に表示されているため、マウス、キーボード、支援技術、又はタッチを介して操作しているすべての利用者に利用できます。</li>
              <li>カルーセルが回転している場合、ボタンのアクセシブルな名前は「自動スライドショーを停止」となり、スライドが変更されていることをスクリーンリーダー利用者に通知するとともに、変更を停止する方法を提供します。</li>
              <li>カルーセルが回転していない場合、ボタンのアクセシブルな名前は「自動スライドショーを開始」となります。</li>
              <li>
                利用者が回転制御ボタンを活性化して回転を開始する場合、利用者が自動回転をすぐに開始したいと考えていると想定されます。したがって、回転を一時停止するカルーセル内のフォーカス及び／又はホバーの状態は無視されます。
                回転は、再び回転制御ボタンが押下されるまで停止することはありません。
              </li>
            </ul>
          </li>
          <li>
            この例には、自動スライド回転を完全に無効にするオプションが含まれています。
            このオプションが選択されると、開始/停止ボタンはレンダリングされず、スライドは次及び前のボタンの活性化を通じてのみ回転することができます。
          </li>
        </ul>
        <h3>テキストと回転制御の色のコントラスト</h3>
        <p>
          このカルーセルのビューでは、コントロールとキャプションが画像内に表示されている場合、背景画像によってコントロールとテキストの色のコントラストが不十分になる可能性があります。
          しかし、このビューには、この潜在的な問題を防ぐための以下の機能が含まれており、WCAG 2.1 の色のコントラスト要件を満たしています:
        </p>
        <ul>
          <li>
            回転制御、次のスライド、及び前のスライドのボタンが画像内にレンダリングされる場合、ボタンには WCAG 2.1 の色のコントラスト要件を満たす前景色と背景色があります。
            さらに、フォーカスのスタイリングは、コントロールがキーボードのフォーカスを受け取ったときにフォーカスインジケーターが非常に目立つようにする SVG 画像を使用しています。
          </li>
          <li>キャプションエリアの透明度が減少しているため、キャプションテキストは WCAG 2.1 の色のコントラスト要件を満たしています。</li>
        </ul>

        <p>
          画像内にコントロールとテキストを表示することによって引き起こされる色のコントラストの問題を回避する一つの方法は、コントロールを画像の外に配置することです。
          コントロールとテキストを固定背景に表示することで、色のコントラストを制御するのが簡単になります。
          一つのビューオプションは、この技術の例を提供しています。
        </p>

        <h3>スライドの変更のスクリーンリーダーの読み上げ</h3>
        <p>
          自動回転がオフになっている場合、カルーセルのスライドコンテンツはライブリージョンに含まれています。
          これにより、スクリーンリーダーの利用者がカルーセルのスライドをスキャンするのが簡単になります。
          スクリーンリーダーの利用者が次又は前のスライドボタンを押下すると、新しいスライドのコンテンツが読み上げられ、コンテンツを操作するかどうかを判断するための即時のフィードバックが与えられます。
          非常に重要なことに、自動回転がオンになっている場合、ライブリージョンは無効になっています。
          そうでなければ、継続的に変更されるコンテンツの読み上げが利用者が読んでいる他のものを毎回中断するため、ページが使用できなくなります。
        </p>
      </section>

      <section>
        <h2 id="kbd_label">キーボードサポート</h2>
        <section>
          <h3 id="kbd_label_2">回転制御ボタン</h3>
          <table aria-labelledby="kbd_label_2 kbd_label" class="def">
            <thead>
              <tr>
                <th>キー</th>
                <th>機能</th>
              </tr>
            </thead>
            <tbody>
              <tr data-test-id="carousel-key-tab">
                <th><kbd>Tab</kbd></th>
                <td>
                  <ul>
                    <li>カルーセル内のインタラクティブな要素を通してフォーカスを移動します。</li>
                    <li>回転制御、前のスライド、次のスライドのボタンは、<kbd>Tab</kbd> の順序でスライドの内容よりも先に来ます。</li>
                  </ul>
                </td>
              </tr>
              <tr data-test-id="carousel-enter-or-space-toggle">
                <th><kbd>Enter</kbd> 又は <kbd>Space</kbd></th>
                <td>カルーセル内のスライドの自動回転を切り替えます。</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section>
          <h3 id="kbd_label_3">次及び前のスライドボタン</h3>
          <table aria-labelledby="kbd_label_3 kbd_label" class="def">
            <thead>
              <tr>
                <th>キー</th>
                <th>機能</th>
              </tr>
            </thead>
            <tbody>
              <tr data-test-id="carousel-key-enter-or-space-move">
                <th><kbd>Enter</kbd><br><kbd>Space</kbd></th>
                <td>カルーセル内の次又は前のスライドを表示します。</td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>

      <section>
        <h2 id="rps_label">ロール、プロパティ、ステート、及び tabindex 属性</h2>
        <table aria-labelledby="rps_label" class="data attributes">
          <thead>
            <tr>
              <th scope="col">ロール</th>
              <th scope="col">属性</th>
              <th scope="col">要素</th>
              <th scope="col">使用法</th>
            </tr>
          </thead>
          <tbody>
            <tr data-test-id="carousel-region-role">
              <th scope="row">
                <code>region</code>
              </th>
              <td></td>
              <td>
                <code>section</code>
              </td>
              <td>
                <ul>
                  <li>アクセス可能な名前を持つ任意の <code>section</code> 要素には <code>region</code> ロールが暗示されます。</li>
                  <li>カルーセルとそのコントロールをランドマーク領域として明示します。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-region-aria-roledescription">
              <td></td>
              <th scope="row">
                <code>aria-roledescription="カルーセル"</code>
              </th>
              <td>
                <code>section</code>
              </td>
              <td>
                <ul>
                  <li>要素を「region」ではなく「カルーセル」として識別するように支援技術に知らせます。</li>
                  <li>ランドマーク領域への移動のような機能には影響せず、支援技術がロールをどのようにレンダリングするかに影響します。</li>
                  <li>注記: <code>aria-roledescription</code>の値はページの言語を使用して明示され、著者によってローカライズされる必要があります。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-region-aria-label">
              <td></td>
              <th scope="row">
                <code>aria-label="ハイライトされたテレビ番組"</code>
              </th>
              <td>
                <code>section</code>
              </td>
              <td>カルーセル領域の内容を説明するラベルを提供します。</td>
            </tr>
            <tr data-test-id="carousel-aria-live">
              <td></td>
              <th scope="row">
                <code>aria-live="off"</code>
              </th>
              <td>
                <code>div.carousel-items</code>
              </td>
              <td>
                <ul>
                  <li>すべてのスライドを含む<code>div</code>要素に適用されます。</li>
                  <li>コンテナ要素を「off」状態のライブ領域として特定し、支援技術の利用者は領域の変更について通知されません。</li>
                  <li>カルーセルが自動的に回転しているとき、ライブ領域はオフになります。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-aria-live">
              <td></td>
              <th scope="row">
                <code>aria-live="polite"</code>
              </th>
              <td>
                <code>div.carousel-items</code>
              </td>
              <td>
                <ul>
                  <li>すべてのスライドを含む<code>div</code>要素に適用されます。</li>
                  <li>コンテナ要素を「polite」状態のライブ領域として特定し、支援技術の利用者は次の利用可能な機会に領域の変更について通知されます。</li>
                  <li>これにより、次のスライドボタンと前のスライドボタンがアクティブになったときにスクリーンリーダーが自動的にスライドの内容を読み上げます。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-group-role">
              <th scope="row">
                <code>group</code>
              </th>
              <td></td>
              <td>
                <code>div.carousel-item</code>
              </td>
              <td>
                <ul>
                  <li>単一のスライドの内容を含む各要素に適用されます。</li>
                  <li>支援技術の利用者がスライドの境界を知覚できるようにします。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-group-aria-roledescription">
              <td></td>
              <th scope="row">
                <code>aria-roledescription="スライド"</code>
              </th>
              <td>
                <code>div.carousel-item</code>
              </td>
              <td>
                <ul>
                  <li>要素を「group」ではなく「スライド」として識別するように支援技術に通知します。</li>
                  <li>支援技術がロールをレンダリングする方法に影響を与えますが、<code>group</code>要素に関連する支援技術の機能を削除することはありません。</li>
                  <li>注記: <code>aria-roledescription</code>の値はページの言語を使用して明示され、著者によってローカライズされる必要があります。</li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-group-aria-label">
              <td></td>
              <th scope="row">
                <code>aria-label="<em>N</em> of 6"</code>
              </th>
              <td>
                <code>div.carousel-item</code>
              </td>
              <td>
                <ul>
                  <li>6 つのスライドのうちどれが表示されているかを利用者に理解させるための独自のラベルを各スライドに提供します。</li>
                  <li>
                    注記: 通常、アクセシブルな名前にセット位置とサイズ情報を含めることは適切ではありません。
                    この実装では例外的に役立ちます。なぜなら、group 要素は <code>aria-setsize</code> 又は <code>aria-posinset</code> をサポートしていないからです。
                  </li>
                </ul>
              </td>
            </tr>
            <tr data-test-id="carousel-button-aria-label">
              <td></td>
              <th scope="row">
                <code>aria-label="LABEL_STRING"</code>
              </th>
              <td>
                <code>button</code>
              </td>
              <td>自動回転の一時停止ボタン及び次／前のスライドボタンのアクセス可能な名前を明示します。</td>
            </tr>
            <tr data-test-id="carousel-button-aria-controls">
              <td></td>
              <th scope="row">
                <code>aria-controls="IDREF"</code>
              </th>
              <td>
                <code>button</code>
              </td>
              <td>
                <ul>
                  <li>ボタンが制御するページ上のコンテンツを特定します。</li>
                  <li>すべてのスライドを含む <code>div</code> を参照します。</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <h2>JavaScript 及び CSS のソースコード</h2>
        <ul id="css_js_files">
          <li>CSS: <a href="css/carousel-prev-next.css" type="text/css">carousel-prev-next.css</a></li>
          <li>Javascript: <a href="js/carousel-prev-next.js" type="text/javascript">carousel-prev-next.js</a></li>
        </ul>
      </section>

      <section>
        <h2 id="sc1_label">HTML ソースコード</h2>
        <div role="separator" id="sc1_start_sep" aria-labelledby="sc1_label sc1_start_sep" aria-label="の開始"></div>
        <pre><code id="sc1"></code></pre>
        <div role="separator" id="sc1_end_sep" aria-labelledby="sc1_label sc1_end_sep" aria-label="の終了"></div>
        <script>
          sourceCode.add('sc1', 'ex1', 'ex_label', 'css_js_files');
          sourceCode.make();
        </script>
      </section>
    </main>
  </body>
</html>
